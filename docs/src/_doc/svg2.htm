<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">Creating an <code>SVG2</code> Drawing</h2><div class="Collapse">

<p>Make sure you have included all required <code>jquery</code> and <code>SVG2</code> scripts in yout HTML5 document.</p>
<pre class="Code" data-echo="html">&lt;script type="text/javascript" src="https://code.jquery.com/jquery-3.7.1.min.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="src/util.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="src/math.js"&gt;&lt;/script&gt;
&lt;script type="text/javascript" src="src/svg2.js"&gt;&lt;/script&gt;</pre>

<p>Create an <code>&lt;svg&gt;</code> tag somewhere in the body of your document:</p>
<pre class="Code" data-echo="html">&lt;p&gt;&lt;svg id="Drawing1"&gt;&lt;/svg&gt;&lt;/p&gt;</pre>

<p>In your Javascript, create an instance of the <code>SVG2</code> class and associate it with the <code>&lt;svg&gt;</code> tag:</p>
<pre class="Code" data-echo="js">function draw() {
    let svg = new SVG2("#Drawing1", {
        lrbt: [-5, 5, -5, 5],
        scale: 32,
        margin: 2,
        grid: 1
    });

    <span class="Comment">// Add drawing instructions here later</span>

}</pre>

<p>The first argument to the <code>SVG2</code> constructor is a selector that identifies the <code>&lt;svg&gt;</code> tag to use. In this example, we are using the <code>id</code> value <code>"Drawing1"</code>.</p>
<p>The second argument is an object describing the <code>SVG2</code> instance’s configuration.</p>

<p>Alternatively, if you do not want to use an existing <code>&lt;svg&gt;</code> tag for your drawing, you can call the static function <code>SVG2.create</code> to create a new tag, and then add it to your document:</p>
<pre class="Code" data-echo="js">function draw() {
    let svg = SVG2.create({
        lrbt: [-5, 5, -5, 5],
        scale: 32,
        margin: 2,
        grid: 1
    });

    $("body").append(svg.element);

    <span class="Comment">// Add drawing instructions here later</span>

}</pre>

<p>The items in the configuration object in these examples are as follows:</p>
<ul>
    <li><b>lrbt</b>: This stands for “left, right, bottom, top”. It is a 4-array specifying the coordinate system your drawing will use. The first two values assign coordinates to the left and right edges of the drawing and the last two to the bottom and top.</li>
    <li><b>scale</b>: An integer that specifies the drawing scale. In this example, <code>32</code> means that one unit in the coordinate system equals 32 pixels on the screen. You can also pass a 2-array if you want to use different scales in the <span class="TeX">x</span> and <span class="TeX">y</span> dimensions. You can omit the <code>scale</code> option and provided a <code>size</code> option instead. The scale will be calculated so that the drawing size, including margins, will equal the specified size.</li>
    <li><b>margin</b>: The number of pixels to add outside of the coordinates specified by <code>lrbt</code>. This can be a 4-array to specify different margins along the left, right, bottom, and top edges.</li>
    <li><b>grid</b>: This option causes a coordinate grid to be drawn at the specified interval. This can be a 2-array to have different grid intervals in the <span class="TeX">x</span> and <span class="TeX">y</span> dimensions.</li>
    <!-- <li><b></b>: </li> -->
</ul>
<p>Additional options not shown in the example above include:</p>
<ul>
    <li><b>noAxes</b>: By default, the <span class="TeX">x</span> and <span class="TeX">y</span> axes are styled differently than other gridlines. Set this option to <code>true</code> to disable this default.</li>
    <li><b>appendAxes</b>: By default, the lines representing the axes are rendered last, so that the axes appear on top of the gridlines. Set this to <code>false</code> to disable this default.</li>
</ul>

<p>Running the example above will produce the following drawing:</p>
<p class="Center"><svg id="Drawing1"></svg></p>
</div></section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">Adding Simple Shapes</h2><div class="Collapse">

<p>After creating your <code>SVG2</code> instance as in the previous example, you can draw basic shapes by adding lines like the following to your <code>draw</code> function:</p>

<pre class="Code" data-echo="js">svg.circle(2, [3, 1]);
svg.ellipse([1, "25"], [-4, 2]);
svg.rect([2, "20"], [-3, -2]);
svg.poly([[0, 0], [-2, 4], [1, 3]]);</pre>

<p>The drawing will now look like this:</p>
<p class="Center"><svg id="Drawing2"></svg></p>

<p>The <code>circle</code> method draws a circle. The first argument (<code>2</code>) is the radius of the circle and the second argument (<code>[3, 1]</code>) gives the coordinates of the circle’s centre. <span class="Red">We will discuss later how to anchor shapes to points other than their centres.</span></p>
<p>If the drawing uses a different scale for the <span class="TeX">x</span> and <span class="TeX">y</span> axes, the size of the circle will be based on an average of the scales. For example, a scale of 32 would mean that a radius of 2 units equals 64 pixels. If the other axis has a scale of 20, 2 units would be 40 pixels. <code>SVG2</code> calculates a root mean square average and draws the circle with a radius of about 53 pixels.</p>
<p>By default, a new <code>&lt;circle&gt;</code> element is appended to the <code>&lt;svg&gt;</code> element, however you can pass as a third argument an existing circle to be resized or recentred. This argument can be an <code>SVGCircleElement</code> instance, or a <code>jquery</code> collection or selector string representing the element.</p>
<p>The <code>circle</code> method returns a <code>jquery</code> collection containing the <code>&lt;circle&gt;</code> element.</p>
<p>The <code>ellipse</code> method is similar to the circle method except that the radius is replaced by an array specifying different horizontal and vertical radii.</p>

<p>The <code>rect</code> method draws a rectangle. The first argument gives the dimensions of the rectangle and the second the corrdinates of its centre. Note that the dimensions in the example are given as <code>[2, "20"]</code>. The unquoted value <code>2</code> indicates a width of 2 units in the drawing’s coordinate system. The quoted <code>"20"</code> indicates a height of 20 <em>pixels</em>. <code>SVG2</code> interprets numbers as coordinate system values and strings as pixel values.</p>

<p>The <code>poly</code> method draws either a closed <code>&lt;polygon&gt;</code> or open <code>&lt;polyline&gt;</code>. The first argument is an array of points to connect. The optional second argument is a boolean value specifying whether to draw a closed (<code>True</code>) or open (<code>False</code>, default) shape. Alternatively, the second argument can describe an existing <code>&lt;polygon&gt;</code> or <code>&lt;polyline&gt;</code> element to be modified.</p>

</div></section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">Styling the Shapes</h2><div class="Collapse Expand">

<p>Since the <code>circle</code>, <code>ellipse</code>, <code>rect</code>, and <code>poly</code> methods all return <code>jquery</code> collections, you can use <code>jquery.css</code> method to set the <code>fill</code>, <code>stroke</code> and <code>stroke-width</code> style attributes.</p>

<pre class="Code" data-echo="js">svg.circle(2, [3, 1]).css({"fill": "red", "stroke": "black", "stroke-width": "2px"});
svg.ellipse([1, "25"], [-4, 2]).css({"fill": "#0065fe", "stroke": "none"});
svg.rect([2, "20"], [-3, -2]).css({"fill": "none", "stroke": "red", "stroke-width": "4px"});
svg.poly([[0, 0], [-2, 4], [1, 3]]).css({"fill": "none", "stroke": "limegreen", "stroke-width": "1px"});</pre>

<p>The drawing will now look like this:</p>
<p class="Center"><svg id="Drawing3"></svg></p>

<p><code>SVG2</code> provides a static function <code>style</code> that makes styling more concise. The following code produces the exact same result:</p>
<pre class="Code" data-echo="js">SVG2.style(svg.circle(2, [3, 1]), "red", "black@2");
SVG2.style(svg.ellipse([1, "25"], [-4, 2]), "#0065fe", "none@");
SVG2.style(svg.rect([2, "20"], [-3, -2]), "none", "red@4");
SVG2.style(svg.poly([[0, 0], [-2, 4], [1, 3]]), "none", "limegreen@1");</pre>

<p>The first argument is the <code>jquery</code> collection to be styled. The remaining arguments are style descriptors. The function interprets a string containing the <code>@</code> symbol as a <code>stroke</code> and <code>stroke-width</code> value; <code>"red@4"</code> is short for <code>{"stroke": "red", "stroke-width": "4px"}</code>. If the string begins or ends with <code>@</code>, it will set only the <code>stroke</code> (e.g. <code>none@</code>) or only the <code>stroke-width</code> (e.g. <code>@2</code>)</p>
<p>The <code>SVG2.style</code> function returns the <code>jquery</code> collection that was passed as the first argument.</p>

</div></section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">Grouping &amp; Animating</h2><div class="Collapse">

<p>1</p>
</div></section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">complex Content</h2><div class="Collapse">

<p>1</p>
</div></section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse">class <code>SVG2</code></h2><div class="Collapse">
<p>The <code>SVG2.js</code> script depends on <a href="https:/jquery.com" target="jQ">jQuery</a> and on the scripts <code>util.js</code>, <code>math.js</code> and <code>bdata.js</code>.</p>
<p>The <code>SVG2</code> class associates a drawing or animation with an <code>&lt;svg&gt;</code> tag in the HTML document. It is a subclass of <code data-feed="src/_doc/svg2g">SVG2g</code>.</p>
<p>The data attributes of each instance, in addition to those inherited from <code>SVG2g</code> are:</p>
<ul>
    <li><code>angleDir</code>: Equal to <code>-1</code> when the <i>y</i>-axis is counterclockwise from the <i>x</i>-axis and <code>1</code> when clockwise.</li>
    <li><code>decimals</code>: The number of decimal places to round coordinates and angles when writing to the <code>&lt;svg&gt;</code> element and its descendants. Default <code>2</code>.</li>
    <li><code>defs</code>: A jQuery object representing the <code>&lt;defs&gt;</code> element(s) of the drawing.</li>
    <li><code>frameCount</code>: The number of animation frames that have been completed.</li>
    <li><code>frameRate</code>: The animation playback speed in frames per second. Default <code>60</code>.</li>
    <li><code>lrbt</code>: A 4-array specifying the coordinates of the left, right, bottom, and top edges of the drawing, excluding the margin.</li>
    <li><code>playing</code>: A boolean value indicating whether the animation is playing (<code>true</code>) or paused (<code>false</code>).</li>
    <li><code>scale</code>: A 2-array describing the <i>x</i>- and <i>y</i>-scales in pixels per unit.</li>
    <li><code>time</code>: The animation time.</li>
    <li><code>timeFactor</code>: A ratio of the animation time to real time. Default <code>1</code>.</li>
    <li><code>unit</code>: Root mean square of the <code>scale</code> values.</li>

</ul>
</div>
</section>

<section class="Post NoPrintIcon" data-icon="slides">   
<h2 class="Collapse Code">new SVG2(selector, options)</h2>
<div class="Collapse">
<p>The arguments for the <code>SVG2</code> constructor are:</p>
<ul>
    <li><code>selector</code>: A jQuery selector identifying the <code>&lt;svg&gt;</code> element to associate with the <code>SVG2</code> instance. If the selector matches more than one <code>&lt;svg&gt;</code> element, the instance will be associated with the first match.</li>
    <li><code>options</code>: An object containing the following attributes...
    <ul>
        <li><code>size</code>: The width and height of the drawing in pixels as a 2-array.</li>
        <li><code>lrbt</code>: A 4-array specifiying the coordinates of the left, right, bottom and top of the drawing. If the top and bottom coordinates are omitted, they will be calculated to ensure that the <i>x</i>- and <i>y</i>-axes have the same scale.</li>
        <li><code>scale</code>: A number or 2-array specifying the desired scale or scales for the drawing in pixels per unit. This will be used with <code>lrbt</code> and <code>margin</code> to calculate the drawing size if the <code>size</code> attribute is not provided.</li>
        <li><code>margin</code>: A number of 4-array specifying the number of edge pixels to exclude from the coordinate system as specfiied by <code>lrbt</code>.</li>
        <li><code>grid</code>: A number of 2-array specifying the <i>x</i>- and <i>y</i>-interval for the coordinate grid.</li>
        <li><code>appendAxes</code>: </li>
        <li><code>noAxes</code>: </li>
    </ul></li>
</ul>

<pre class="Code" data-echo="js">let svg = new SVG2("#id", {
    size: [640, 360],
    lrbt: [-10, 10, -2, 2],
    grid: 1,
    margin: 2
});
</pre>

<p>The <code>options</code> argument is an object with the following attributes:</p>

</div>
</section>

<script type="text/javascript" data-init="draw">

loadFeed.draw1 = () => {
    let svg = new SVG2("#Drawing1", {lrbt: [-5, 5, -5, 5], scale: 32, margin: 2, grid: 1});
}

loadFeed.draw2 = () => {
    let svg = new SVG2("#Drawing2", {lrbt: [-5, 5, -5, 5], scale: 32, margin: 2, grid: 1});
    svg.circle(2, [3, 1]);
    svg.ellipse([1, "25"], [-4, 2]);
    svg.rect([2, "20"], [-3, -2]);
    svg.poly([[0, 0], [-2, "8"], [1, 3]]);
}

loadFeed.draw3 = () => {
    let svg = new SVG2("#Drawing3", {lrbt: [-5, 5, -5, 5], scale: 32, margin: 2, grid: 1});
    let g = css(svg.circle(2, [3, 1]), "red", "black@2");
    css(svg.ellipse([1, "25"], [-4, 2]), "#0065fe", "none@");
    css(svg.rect([2, "20"], [-3, -2]), "none", "red@4");
    css(svg.poly([[0, 0], [-2, 4], [1, 3]]), "none", "limegreen@1");
    let t = css(svg.text("Hello, world!"), "text", 32);
    console.log(t[0].getBBox());
    svg.circle(1, [0, 0], g);
}

loadFeed.draw = () => {
    for (let i=1;i<4;i++) loadFeed[`draw${i}`]();
}

loadFeed.data = {
    title: `SVG2 Documentation`,
    up: "home",
}

</script>
