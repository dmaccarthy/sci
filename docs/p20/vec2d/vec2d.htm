<script type="text/javascript" data-init="init">

/* Redirect old vec2d applet to new version! */

loadFeed.init = () => {
    let data = decodeURIComponent(location.search.slice(1));
    data = JSON.parse(data);
    let shift = data.shift;
    if (shift) {
        data.vectors = [shift].concat(data.vectors);
    }
    let s = "";
    for (let v of data.vectors) {
        v = v instanceof Array ? `[${v[0]},${v[1]}]` : `@(${v.mag},${v.dir})`;
        s += (s.length ? ',' : '') + v;
    }
    let info = {v: s};
    if (data.symbol) info.sym = data.symbol;
    if (data.unit) info.unit = data.unit;
    if (shift) info.shift = 1;
    info = encodeURIComponent(JSON.stringify(info));
    location.href = `?${info}#p20/vec2d/vec_diag`;
}

</script>